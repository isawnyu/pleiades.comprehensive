{
	"$schema": "http://json-schema.org/schema#",
	"title": "Pleiades Project JSON Export Schema",
	"description": "JSON serialization of a Pleiades 'place' object.",
	"type": "object",
	"allOf": [
		{ "$ref": "#/definitions/pleiades_item" },
		{ 
			"properties": {
				"bbox": {
					"title": "bounding box",
					"description": "southwest longitude, southwest latitude, northeast longitude, northeast latitude",
					"type": "array",
					"minItems": 4,
					"maxItems": 4,
					"items": [
						{ "$ref": "#/definitions/longitude" },
						{ "$ref": "#/definitions/latitude" },
						{ "$ref": "#/definitions/longitude" },
						{ "$ref": "#/definitions/latitude" }
					]
				},
				"connectsWith": { 
					"type": "array",
					"items": [
						{ "$ref": "#/definitions/numeric-string" }
					] 
				},
				"features": { 
					"type": "array",
					"items": [
						{ "$ref": "#/definitions/location" }
					] 
				},
				"names": { 
					"type": "array",
					"items": [
						{ "$ref": "#/definitions/placename" }
					]
				},
				"place_types": { "type": "array" },
				"reprPoint": { 
					"title": "representative point",
					"description": "centroid or other generalized representation of features: longitude, latitude",
					"type": "array",
					"minItems": 2,
					"maxItems": 2,
					"items": [
						{ "$ref": "#/definitions/longitude" },
						{ "$ref": "#/definitions/latitude" }
					]
				},
				"title": { "type": "string" },
				"type": { 
					"type": "string",
					"enum": ["FeatureCollection"]
				}
			},
			"required": [
				"connectsWith",
				"features",
				"names",
				"place_types",
				"title",
				"type"
			]
		}
	],
	"definitions": {
		"actor": {
			"type": "object",
			"properties": {
				"name": { "type": "string"},
				"username": { "type": "string"},
				"orcid": { "type": "string"},
				"viaf": { "type": "string"}
			},
			"required": [ "name" ]
		},
		"actors": {
			"type": "array",
			"items": [ { "$ref": "#/definitions/actor" } ]
		},
		"history": {
			"type": "array",
			"items": [ { "$ref": "#/definitions/history_event" } ]
		},
		"history_event": {
			"type": "object",
			"properties": {
				"comment": { "type": "string" },
				"modified": { 
					"type": "string",
					"format": "date-time" },
				"principal": { "$ref": "#/definitions/actor" }
			}
		},
		"latitude": {
			"type": "number",
			"maximum": 90.0,
			"minimum": -90.0
		},
		"location": {
			"description": "JSON serialization of a Pleiades 'location' object as a GeoJSON Feature.",
			"type": "object",
			"properties": {
				"geometry": { "type": "object" },
				"id": { "type": "string" },
				"properties": { "type": "object" },
				"type": { 
					"type": "string",
					"enum": ["Feature"]
				}
			}
		},
		"longitude": {
			"type": "number",
			"maximum": 180.0,
			"minimum": -180.0
		},
		"numeric-string": {
			"type": "string",
			"pattern": "^[0-9]+$"
		},
		"placename": {
			"description": "JSON serialization of a Pleiades 'name' object.",
			"type": "object",
			"allOf": [
				{ "$ref": "#/definitions/pleiades_item" },
				{ 
					"properties": {
						"association_certainty": { 
							"type": "string",
							"enum": ["certain", "less-certain", "uncertain"] 
						},
						"attested": { "type": "string" },
						"during": { "type": "array" },
						"end_date": { "type": "string" },
						"language": { "type": "string" },
						"name_type": { 
							"type": "string",
							"enum": ["unknown", "undefined", "geographic", "ethnic"]
						},
						"romanized": { "type": "string" },
						"start_date": { "type": "string" },
						"transcription_accuracy": { 
							"type": "string",
							"enum": ["accurate", "false", "inaccurate"]
						},
						"transcription_completeness": { 
							"type": "string",
							"enum": ["reconstructable", "non-reconstructable", "complete"]
						}
					},
					"required": [
						"association_certainty",
						"attested",
						"during",
						"end_date",
						"language",
						"name_type",
						"romanized",
						"start_date",
						"transcription_accuracy",
						"transcription_completeness"
					]
				}
			]
		},
		"pleiades_item": {
			"title": "Pleiades Item",
			"description": "A class definition that comprises all the fields common to Pleiades places, names, and locations.",
			"type": "object",
			"properties": {
				"citation": { "type": "string" },
				"contributors": { "$ref": "#definitions/actors" },
				"creators": { "$ref": "#definitions/actors" },				
				"description": { "type": "string" },
				"details": { "type": "string" },
				"history": { "$ref": "#definitions/history" },
				"id": { "type": "string" },
				"provenance": { "type": "string" },
				"references": { "type": "array" },
				"uri": { 
					"type": "string",
					"format": "uri"
				}
			},
			"required": [
				"citation",
				"contributors",
				"creators",
				"description",
				"details",
				"history",
				"id",
				"provenance",
				"references",
				"uri"
			]
		}
	}
}
